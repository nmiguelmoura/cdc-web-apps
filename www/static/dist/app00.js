/*Created by Nuno Machado --> http://github.com/nmiguelmoura*/
/*Created by Nuno Machado --> http://github.com/nmiguelmoura*/
"use strict";var nmm={};nmm.engine={},nmm.states={},nmm.states.genericStates={},nmm.states.genericStates.views={},nmm.states.specificStates={},nmm.states.specificStates.views={},nmm.states.specificStates.models={},nmm.states.specificStates.components={},nmm.app={},nmm.dom={},nmm.components={},nmm.tools={},nmm.runtime={},nmm.runtime.dom={};
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),_get=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)};nmm.states.genericStates.TemplateState=function(t){function e(t){_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.name="",n.TWEEN_IN_TIME=.5,n.TWEEN_OUT_TIME=.5,n.alpha=0,n._isInitted=!1,n}return _inherits(e,PIXI.Container),_createClass(e,[{key:"animateIn",value:function(){TweenLite.to(this,this.TWEEN_IN_TIME,{alpha:1}),TweenLite.delayedCall(this.TWEEN_IN_TIME,function(){this._stateIn()},[],this)}},{key:"animateOut",value:function(t){t||console.error("ATTENTION\nCallback not defined in animateOut method from class "+this.name),TweenLite.to(this,this.TWEEN_OUT_TIME,{alpha:0}),TweenLite.delayedCall(this.TWEEN_OUT_TIME,function(){this._stateOut(),t(this)},[],this)}},{key:"_stateIn",value:function(){}},{key:"_stateOut",value:function(){}},{key:"destroy",value:function(){_get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this,{children:!0,textures:!0})}},{key:"setParams",value:function(){}},{key:"_init",value:function(){}},{key:"init",value:function(){this._isInitted||(this._init(),this._isInitted=!0)}}]),e}();
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),_get=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,i)}if("value"in n)return n.value;var s=n.get;if(void 0!==s)return s.call(i)};nmm.states.genericStates.views.LogoView=function(t){function e(){_classCallCheck(this,e);var t=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._centerX=nmm.runtime.app.defaultResolution.width/2,t._init(),t}return _inherits(e,PIXI.Container),_createClass(e,[{key:"destroy",value:function(){_get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this,{children:!0,texture:!0,baseTexture:!0})}},{key:"_addFields",value:function(){var t={fontFamily:"Arial",fontSize:"66px",fill:"#FFFFFF"};this._title=new PIXI.Text("Casa das CiÃªncias",t),this._title.anchor.set(.5),this._title.position.set(this._centerX,600),this.addChild(this._title),t.fontSize="26px",this._subTitle=new PIXI.Text("RECURSOS DIGITAIS PARA PROFESSORES",t),this._subTitle.anchor.set(.5),this._subTitle.position.set(this._centerX,668),this.addChild(this._subTitle)}},{key:"_addLogo",value:function(){this._logo=new PIXI.Sprite(PIXI.Texture.fromImage(PIXI.loader.resources.logo.url)),this._logo.anchor.set(.5),this._logo.position.set(this._centerX,295),this.addChild(this._logo)}},{key:"_init",value:function(){this._addLogo(),this._addFields()}}]),e}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)};nmm.states.genericStates.Logo=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.name="logo",e.DURATION=2.5,e}return _inherits(t,nmm.states.genericStates.TemplateState),_createClass(t,[{key:"destroy",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this,{children:!0,texture:!0,baseTexture:!0})}},{key:"_stateOut",value:function(){nmm.runtime.app.fsm.destroyState(this.name)}},{key:"_stateIn",value:function(){TweenLite.delayedCall(this.DURATION,function(){nmm.runtime.app.fsm.changeState("menu")},[],this)}},{key:"_addView",value:function(){this._view=new nmm.states.genericStates.views.LogoView,this.addChild(this._view)}},{key:"_init",value:function(){this._addView()}}]),t}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();nmm.states.genericStates.views.LoadingView=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.name="loading",e.INCREMENT_ROTATION=.05,e._init(),e}return _inherits(t,PIXI.Container),_createClass(t,[{key:"reset",value:function(){this._loadingIcon.scale.set(.5),this.startLoading()}},{key:"update",value:function(){this._loadingIcon.rotation+=this.INCREMENT_ROTATION}},{key:"endLoading",value:function(){TweenLite.to(this._loadingIcon.scale,.5,{x:1.5,y:1.5}),TweenLite.delayedCall(.5,function(){nmm.runtime.app.pixi.app.ticker.remove(this._onFrameUpdateBound)},[],this)}},{key:"startLoading",value:function(){this._onFrameUpdateBound||(this._onFrameUpdateBound=this.update.bind(this)),nmm.runtime.app.pixi.app.ticker.add(this._onFrameUpdateBound)}},{key:"_buildLoader",value:function(){var e=new PIXI.Graphics,t=void 0,n=void 0,i=void 0,o=void 0;for(t=0;t<8;t++)n=t*(180/7)*Math.PI,i=40*Math.cos(n),o=40*Math.sin(n),e.beginFill(16777215,1-.1*t).lineStyle(1,0,1).drawCircle(i,o,6);e.endFill(),this._loadingIcon=new PIXI.Sprite(e.generateTexture()),this._loadingIcon.position.set(nmm.runtime.app.defaultResolution.width/2,nmm.runtime.app.defaultResolution.height/2),this._loadingIcon.anchor.set(.5),this._loadingIcon.scale.set(.5),this.addChild(this._loadingIcon),e.clear(),e.destroy({texture:!0})}},{key:"_init",value:function(){this._buildLoader()}}]),t}();
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),_get=function t(e,o,n){null===e&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,o);if(void 0===s){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,o,n)}if("value"in s)return s.value;var r=s.get;if(void 0!==r)return r.call(n)};nmm.states.genericStates.Loading=function(t){function e(){_classCallCheck(this,e);var t=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.name="loading",t._toDestroy=!1,t}return _inherits(e,nmm.states.genericStates.TemplateState),_createClass(e,[{key:"destroy",value:function(){this.removeChild(this._view),this._view.destroy(),this._view=null,_get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this,{children:!0,texture:!0})}},{key:"_stateOut",value:function(){this._stateToGo=null,(nmm.app.config.destroyLoadingAfterInit||this._toDestroy)&&nmm.runtime.app.fsm.destroyState(this.name)}},{key:"animateOut",value:function(t){this._view.endLoading(),_get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"animateOut",this).call(this,t)}},{key:"_secondaryAssetsLoaded",value:function(){console.log("... Loading secondary assets successful"),nmm.runtime.app.fsm.changeState(this._stateToGo)}},{key:"_primaryAssetsLoaded",value:function(){console.log("... Loading primary assets successful"),nmm.runtime.app.fsm.changeState("logo")}},{key:"loadSecondaryAssets",value:function(t,e,o){this._stateToGo=e,this._toDestroy=o,this._view.reset(),nmm.runtime.app.assetsLoader.loadExtraTextures(t,this._secondaryAssetsLoaded.bind(this))}},{key:"_loadPrimaryAssets",value:function(){nmm.runtime.app.assetsLoader.init(this._primaryAssetsLoaded.bind(this))}},{key:"_addView",value:function(){this._view=new nmm.states.genericStates.views.LoadingView,this.addChild(this._view),this._view.startLoading()}},{key:"_init",value:function(){this._addView(),this._loadPrimaryAssets()}}]),e}();
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}();nmm.tools.Pool=function(){function t(e){_classCallCheck(this,t),this._pool=[],this._totalCount=0,this._max=e||100,this._defaultTexture=PIXI.Texture.EMPTY}return _createClass(t,[{key:"_createNew",value:function(){if(this._totalCount<this._max)return new PIXI.Sprite;console.log("POOL MAX REACHED!")}},{key:"returnToPool",value:function(t){t.scale.set(1),t.position.set(0,0),t.anchor.set(0),t.pivot.set(0,0),t.texture=this._defaultTexture,this._pool.push(t)}},{key:"borrowFromPool",value:function(){return 0===this._pool.length?this._createNew():this._pool.pop()}}]),t}();
"use strict";nmm.tools.utils={shuffleArray:function(t){for(var r,n,e=t.length;e>0;)n=Math.floor(Math.random()*e),r=t[--e],t[e]=t[n],t[n]=r;return t},hitTestRectangle:function(t,r,n){return t.x>r.x+n.x&&t.x<r.x+r.w-n.x&&t.y>r.y+n.y&&t.y<r.y+r.h-n.y}};
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();nmm.components.LiveCounter=function(e){function t(e,n){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r._max=e,r._hspacing=n,r._hearts=[],r._init(),r}return _inherits(t,PIXI.Container),_createClass(t,[{key:"takeLive",value:function(){var e=void 0,t=void 0;for(e=this._hearts.length-1;e>=0;e--)if((t=this._hearts[e]).on){t.on=!1,TweenLite.to(t,.5,{alpha:.2}),TweenLite.to(t.scale,.5,{x:0,y:0,ease:Back.easeIn.config(3)});break}}},{key:"reset",value:function(){this._hearts.forEach(function(e){e.alpha=1,e.scale.set(1),e.on=!0})}},{key:"_addHearts",value:function(){var e=void 0,t=void 0,n=PIXI.Texture.fromFrame("heart"),r=void 0;for(e=0;e<this._max;e++)(t=new PIXI.Sprite(n)).anchor.set(.5,.5),t.on=!0,r||(r=t.getBounds()),t.position.x=0-e*(r.width+this._hspacing),this.addChild(t),this._hearts.push(t)}},{key:"_init",value:function(){this._addHearts()}}]),t}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();nmm.components.MedalPopupComponent=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i._frames=e,i._textStyle={fontFamily:"Arial",fontSize:"16px",fill:0,wordWrap:!0,wordWrapWidth:160,lineHeight:24},i._init(),i}return _inherits(t,PIXI.Container),_createClass(t,[{key:"show",value:function(e,t){TweenLite.to(this,.5,{x:796}),TweenLite.to(this,.5,{x:1025,delay:3}),this._medal.gotoAndStop(e-1),this._field.text=nmm.app.config.medals["game-"+e]["medal-"+t]}},{key:"_addField",value:function(){this._field=new PIXI.Text("",this._textStyle),this._field.position.set(60,12),this.addChild(this._field)}},{key:"_addMedal",value:function(){this._medal=new PIXI.extras.AnimatedSprite(this._frames),this._medal.position.set(5,0),this.addChild(this._medal)}},{key:"_addBg",value:function(){var e=(new PIXI.Graphics).beginFill(16777215,.9).drawRect(0,0,10,10).endFill(),t=new PIXI.Sprite(e.generateTexture());t.width=230,t.height=68,this.addChild(t)}},{key:"_init",value:function(){this.position.set(1025,10),this._addBg(),this._addMedal(),this._addField()}}]),t}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();nmm.correctionTextures={},nmm.components.CorrectionMC=function(e){function t(){_classCallCheck(this,t),nmm.correctionTextures.correct=nmm.correctionTextures.correct||PIXI.Texture.fromFrame("certo"),nmm.correctionTextures.wrong=nmm.correctionTextures.wrong||PIXI.Texture.fromFrame("errado");var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,[nmm.correctionTextures.wrong,nmm.correctionTextures.correct]));return e.anchor.set(.5),e._init(),e}return _inherits(t,PIXI.extras.AnimatedSprite),_createClass(t,[{key:"hide",value:function(){TweenLite.killTweensOf(this),this.alpha=0}},{key:"hideAnimated",value:function(){TweenLite.to(this,.3,{alpha:0}),TweenLite.to(this.scale,.3,{x:0,y:0})}},{key:"show",value:function(e,t,n){this.alpha=0,this.scale.set(2),this.gotoAndStop(e),this.position.set(t.x,t.y),TweenLite.to(this,.5,{alpha:1}),TweenLite.to(this.scale,1,{x:1,y:1,ease:Elastic.easeOut.config(1,.3)}),n||TweenLite.delayedCall(2,function(){this.hideAnimated()},[],this)}},{key:"_init",value:function(){this.alpha=0}}]),t}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();nmm.components.Button=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e=e||{},e.anchor=e.anchor||{},i.position.set(e.x||0,e.y||0),i.scale.set(e.scale||1),i.anchor.set(e.anchor.x||0,e.anchor.y||0),i.key=e.key||0,i.autoHide=e.autoHide||!1,i.callback=e.callback||function(){},i.enableOnStart=e.enableOnStart||!1,i.trackOverOut=e.trackOverOut||!1,i.trackDown=e.trackDown||!1,i.keyCode=e.keyCode,i.isEnabled=!1,i._init(),i}return _inherits(t,PIXI.Sprite),_createClass(t,[{key:"hide",value:function(){this.visible=!1,this.disable()}},{key:"show",value:function(){this.visible=!0,this.enable()}},{key:"disable",value:function(e){this.isEnabled&&(this.isEnabled=!1,e=e||1,this.alpha=e,this.interactive=!1,this.buttonMode=!1,this.off("pointerdown",this._downHandler),this.off("pointerup",this._upHandler),this.off("pointerupoutside",this._upOutsideHandler),this.off("pointerover",this._overHandler),this.off("pointerout",this._outHandler),this.keyCode&&window.removeEventListener("keydown",this._keyHandlerBound))}},{key:"enable",value:function(){this.isEnabled||(this.isEnabled=!0,this.interactive=!0,this.buttonMode=!0,this.on("pointerdown",this._downHandler),this.trackOverOut&&this.on("pointerover",this._overHandler),this.keyCode&&window.addEventListener("keydown",this._keyHandlerBound))}},{key:"_outHandler",value:function(e){this.off("pointerout",this._outHandler),this.callback("OUT",this.key,this,e)}},{key:"_overHandler",value:function(e){this.on("pointerout",this._outHandler),this.callback("OVER",this.key,this,e)}},{key:"_upOutsideHandler",value:function(e){this.off("pointerup",this._upHandler),this.off("pointerupoutside",this._upOutsideHandler)}},{key:"_keyHandler",value:function(e){e.keyCode===this.keyCode&&(this.callback("UP",this.key,this,e),this.autoHide&&this.hide())}},{key:"_upHandler",value:function(e){this.off("pointerup",this._upHandler),this.off("pointerupoutside",this._upOutsideHandler),this.callback("UP",this.key,this,e),this.autoHide&&this.hide()}},{key:"_downHandler",value:function(e){this.on("pointerup",this._upHandler),this.on("pointerupoutside",this._upOutsideHandler),this.trackDown&&this.callback("DOWN",this.key,this,e)}},{key:"_init",value:function(){this.keyCode&&(this._keyHandlerBound=this._keyHandler.bind(this)),this.enableOnStart&&this.enable()}}]),t}();
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}nmm.components.TexturedButton=function(t){function e(t){_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.texture=t.texture,n}return _inherits(e,nmm.components.Button),e}();
"use strict";function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,i){for(var n=0;n<i.length;n++){var s=i[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(i,n,s){return n&&t(i.prototype,n),s&&t(i,s),i}}();nmm.dom.InputField=function(){function t(i){return _classCallCheck(this,t),i=i||{},this._build(i)}return _createClass(t,[{key:"_build",value:function(t){return this.input=document.createElement("input"),this.input.options={parentDiv:t.parentDiv||nmm.runtime.dom.mainDiv,type:t.type||"text",maxLength:t.maxLength,top:t.top||0,left:t.left||0,width:t.width||100,height:t.height||36,display:t.display||"block",trackChange:t.trackChange||!1,callback:t.callback||function(){},addedToParent:!1,enabled:!1},this.input.setDimensions=function(t){this.options.width=t.width||this.options.width,this.options.height=t.height||this.options.height,this.resize()},this.input.setPosition=function(t){this.options.top=t.top||this.options.top,this.options.left=t.left||this.options.left,this.resize()},this.input.setValue=function(t){this.value=t},this.input.getValue=function(){return this.value},this.input.changeHandler=function(){this.options.callback(this.getValue())},this.input.enable=function(){this.options.enabled||(this.options.enabled=!0,this.disabled=!1,this.options.trackChange&&(this.changeBound||(this.changeBound=this.changeHandler.bind(this)),this.addEventListener("input",this.changeBound)))},this.input.disable=function(){this.options.enabled&&(this.options.enabled=!1,this.disabled=!0,this.options.trackChange&&this.removeEventListener("input",this.changeBound))},this.input.show=function(){this.options.display="block",this.style.display="block",this.enable()},this.input.hide=function(){this.options.display="none",this.style.display="none",this.disable()},this.input.setClassName=function(t){this.className="app-input-field",t&&(this.className+=" "+t)},this.input.addToParent=function(){this.options.addedToParent||(this.options.addedToParent=!0,this.options.parentDiv.appendChild(this),nmm.observer.subscribe("resize",this.resize,this))},this.input.removeFromParent=function(){this.options.addedToParent&&(this.options.addedToParent=!1,this.options.parentDiv.removeChild(this),nmm.observer.unsubscribe("resize",this.resize,this))},this.input.resize=function(){var t=nmm.runtime.app.scale;this.style.left=this.options.left*t+"px",this.style.top=this.options.top*t+"px",this.style.width=this.options.width*t+"px",this.style.height=this.options.height*t+"px"},this.input.setAttribute("type",this.input.options.type),this.input.options.maxLength&&this.input.setAttribute("maxlength",this.input.options.maxLength),this.input.setClassName(t.className),"block"===this.input.options.display?this.input.show():this.input.hide(),this.input.addToParent(),this.input.resize(),this.input}}]),t}();
"use strict";function _classCallCheck(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function i(i,t){for(var s=0;s<t.length;s++){var e=t[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(i,e.key,e)}}return function(t,s,e){return s&&i(t.prototype,s),e&&i(t,e),t}}();nmm.dom.Div=function(){function i(t){return _classCallCheck(this,i),t=t||{},this._build(t)}return _createClass(i,[{key:"_build",value:function(i){return this.div=document.createElement("div"),this.div.options={parentDiv:i.parentDiv||document.body,top:i.top||0,left:i.left||0,width:i.width||0,height:i.height||0,display:i.display||"block",addedToParent:!1},this.div.show=function(){this.options.display="block",this.style.display="block"},this.div.hide=function(){this.options.display="none",this.style.display="none"},this.div.setClassName=function(i){this.className="app-div",i&&(this.className+=" "+i)},this.div.addToParent=function(){this.options.addedToParent||(this.options.addedToParent=!0,this.options.parentDiv.appendChild(this),nmm.observer.subscribe("resize",this.resize,this))},this.div.removeFromParent=function(){this.options.addedToParent&&(this.options.addedToParent=!1,this.options.parentDiv.removeChild(this),nmm.observer.unsubscribe("resize",this.resize,this))},this.div.resize=function(){var i=nmm.runtime.app.scale,t=nmm.runtime.app.margins;this.style.left=t.x+this.options.left*i+"px",this.style.top=t.y+this.options.top*i+"px",this.style.width=this.options.width*i+"px",this.style.height=this.options.height*i+"px"},this.div.setClassName(i.className),"block"===this.div.options.display?this.div.show():this.div.hide(),this.div.addToParent(),this.div.resize(),this.div}}]),i}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();nmm.runtime.singletons=nmm.runtime.singletons||{},nmm.runtime.singletons.assetsLoader=null,nmm.engine.AssetsLoader=function(){function e(){return _classCallCheck(this,e),nmm.runtime.singletons.assetsLoader||(nmm.runtime.singletons.assetsLoader=this),this._texturesLoaded=!1,this._audioLoaded=!1,this._dpr=nmm.runtime.app.devicePixelRatio<=2?Math.round(nmm.runtime.app.devicePixelRatio):2,nmm.runtime.singletons.assetsLoader}return _createClass(e,[{key:"_loadComplete",value:function(){this._texturesLoaded&&this._audioLoaded&&this._callback()}},{key:"_loadAudio",value:function(){var e=this,t=nmm.app.config.audio,n=0,o=0;createjs.Sound.on("fileload",function(t){n===++o&&(e._audioLoaded=!0,e._loadComplete())}),t.alternateExtensions.length>0&&(createjs.Sound.alternateExtensions=t.alternateExtensions),t.files.forEach(function(e){n++,createjs.Sound.registerSound(e.src,e.label)}),t.spriteSheets.forEach(function(e){n++,createjs.Sound.registerSound(e)}),0===n&&(e._audioLoaded=!0,e._loadComplete())}},{key:"_loadTextures",value:function(){var e=this;this._loader=PIXI.loader,nmm.app.config.textures.spriteSheets["ss"+this._dpr].forEach(function(t){e._loader.add(t)}),nmm.app.config.textures.logo["ss"+this._dpr]&&e._loader.add("logo",nmm.app.config.textures.logo["ss"+this._dpr]),nmm.app.config.textures.otherTextures.length>0&&nmm.app.config.textures.otherTextures.forEach(function(t){e._loader.add(t.label,t["ss"+this._dpr])}),this._loader.load(function(t,n){e._texturesLoaded=!0,e._loadComplete()})}},{key:"loadExtraTextures",value:function(e,t){var n=this;e.length>0&&e.forEach(function(e){n._loader.add(e.label,e["ss"+n._dpr])}),this._loader.load(function(e,n){t()})}},{key:"init",value:function(e){this._callback=e,this._loadTextures(),this._loadAudio()}},{key:"loader",get:function(){return this._loader}}]),e}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}();nmm.runtime.singletons=nmm.runtime.singletons||{},nmm.runtime.singletons.fsm=null,nmm.engine.FSM=function(){function e(){_classCallCheck(this,e),nmm.runtime.singletons.fsm||(nmm.runtime.singletons.fsm=this);return this._state=null,this._states={},this._stage=nmm.runtime.app.pixi.stage,this._removeStateFromStageBound=this._removeStateFromStage.bind(this),nmm.runtime.singletons.fsm}return _createClass(e,[{key:"_lowerCaseName",value:function(e){return e=e?e.toLowerCase():""}},{key:"destroyState",value:function(e){e=this._lowerCaseName(e);var t=this.getStateByName(e);t&&(t.destroy(),this._states[e]=null,delete this._states[e],console.log("xx State destroyed: ",e))}},{key:"_removeStateFromStage",value:function(e){e&&this._stage.removeChild(e)}},{key:"getStateByName",value:function(e){if(e=this._lowerCaseName(e),this._states[e])return this._states[e];console.info("There is no state available with the name (--\x3e "+e+" <--).")}},{key:"changeState",value:function(e,t){e=this._lowerCaseName(e),console.log("-> Change to state: ",e),this._state&&this._state.animateOut(this._removeStateFromStageBound);var a=this.getStateByName(e);a?(a.init(),a.setParams(t),a.animateIn(),this._stage.addChild(a),this._state=a):console.info("The state with the name "+e+" is not registered.")}},{key:"registerState",value:function(e){var t=this._lowerCaseName(e.name);this._states[t]?console.info("There is already a state with the name (--\x3e "+t+" <--) registered! Please choose another name or use method getStateByName (name) with chosen name as argument to get the state"):this._states[t]=e}},{key:"_startMachine",value:function(){var e=new nmm.states.genericStates.Loading;this.registerState(e),this.changeState(e.name),this.registerState(new nmm.states.genericStates.Logo);var t=void 0,a=nmm.states.specificStates;for(t in a)a.hasOwnProperty(t)&&"function"==typeof a[t]&&this.registerState(new a[t])}},{key:"init",value:function(){null===this._state&&this._startMachine()}},{key:"currentStateName",get:function(){return lowerCaseName(this._state.name)}},{key:"currentState",get:function(){return this._state}}]),e}();
"use strict";function _classCallCheck(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function i(i,e){for(var t=0;t<e.length;t++){var s=e[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}return function(e,t,s){return t&&i(e.prototype,t),s&&i(e,s),e}}();nmm.runtime.singletons=nmm.runtime.singletons||{},nmm.runtime.singletons.resize=null,nmm.engine.Resize=function(){function i(e,t,s){return _classCallCheck(this,i),nmm.runtime.singletons.resize||(nmm.runtime.singletons.resize=this),this._renderer=e,this._stage=t,this._default=s,this._scale=null,this._size={},this._margin={},nmm.runtime.singletons.resize}return _createClass(i,[{key:"_canvasAlignment",value:function(){this._margin={},this._margin.x=(this._size.windowWidth-this._size.width)/2,this._margin.y=(this._size.windowHeight-this._size.height)/2,this._renderer.view.style.marginLeft=this._margin.x+"px",this._renderer.view.style.marginTop=this._margin.y+"px"}},{key:"_canvasResize",value:function(){this._size.windowWidth=window.innerWidth,this._size.windowHeight=window.innerHeight;var i=this._size.windowWidth/this._default.width,e=this._size.windowHeight/this._default.height;this._scale=Math.min(i,e),this._scale=this._scale<=1?this._scale:1,this._size.width=Math.floor(this._default.width*this._scale),this._size.height=Math.floor(this._default.height*this._scale),this._renderer.resize(this._size.width,this._size.height),this._stage.scale.x=this._scale,this._stage.scale.y=this._scale}},{key:"_resize",value:function(){this._canvasResize(),this._canvasAlignment(),this._renderer.render(this._stage),nmm.observer.publish("resize")}},{key:"init",value:function(){window.addEventListener("resize",this._resize.bind(this)),this._resize()}},{key:"windowResolution",get:function(){return{width:this._size.windowWidth,height:this._size.windowHeight}}},{key:"scale",get:function(){return this._scale}},{key:"margins",get:function(){return this._margin}},{key:"resolution",get:function(){return{width:this._size.width,height:this._size.height}}}]),i}();
"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var s=n[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(n,t,s){return t&&e(n.prototype,t),s&&e(n,s),n}}();nmm.runtime.singletons=nmm.runtime.singletons||{},nmm.runtime.singletons.observer=null,nmm.engine.Observer=function(){function e(){return _classCallCheck(this,e),nmm.runtime.singletons.observer||(nmm.runtime.singletons.observer=this),this._events={},nmm.runtime.singletons.observer}return _createClass(e,[{key:"subscribe",value:function(e,n,t){this._events.hasOwnProperty(e)||(this._events[e]=[]),this._events[e].push({callback:n,scope:t})}},{key:"unsubscribe",value:function(e,n){if(this._events.hasOwnProperty(e)){var t=0,s=this._events[e].length,r=this._events[e];for(t=0;t<s;t++)if(r[t].callback===n){r.splice(t,1);break}}}},{key:"publish",value:function(e){if(this._events.hasOwnProperty(e)){var n,t=this._events[e],s=Array.prototype.slice.call(arguments,1),r=t.length;for(n=0;n<r;n++)t[n].callback.apply(t[n].scope,s)}}}]),e}();
"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}();nmm.runtime.singletons=nmm.runtime.singletons||{},nmm.runtime.singletons.application=null,nmm.engine.Application=function(){function e(){return _classCallCheck(this,e),nmm.runtime.singletons.application||(nmm.runtime.singletons.application=this),this.WIDTH=1024,this.HEIGHT=768,this._dpr=null,nmm.runtime.singletons.application}return _createClass(e,[{key:"_setAssetsLoader",value:function(){this._assetsLoader=new nmm.engine.AssetsLoader}},{key:"_setFSM",value:function(){this._fsm=new nmm.engine.FSM,this._fsm.init()}},{key:"_resizeApp",value:function(){this._resize=new nmm.engine.Resize(this.pixi.renderer,this.pixi.stage,this.defaultResolution),this._resize.init()}},{key:"_setupDOM",value:function(){if(document.body.style.backgroundColor=PIXI.utils.hex2string(nmm.app.config.backgroundColorDocument),document.body.style.backgroundImage="url("+nmm.app.config.tileURL+")",nmm.app.config.DOMElements){var e=new nmm.dom.Div;nmm.runtime.dom.mainDiv=e}}},{key:"_setupPIXI",value:function(){this._pixi=new PIXI.Application({width:this.WIDTH,height:this.HEIGHT,resolution:this.devicePixelRatio,autoResize:!0,transparent:nmm.app.config.transparent,backgroundColor:nmm.app.config.transparent?null:nmm.app.config.backgroundColorPIXI}),document.body.appendChild(this._pixi.view)}},{key:"init",value:function(){nmm.observer=new nmm.engine.Observer,nmm.dataModel=new nmm.app.DataModel,nmm.dataModel.init(),this._setupPIXI(),this._resizeApp(),this._setupDOM(),this._setAssetsLoader(),this._setFSM()}},{key:"touchSupport",get:function(){return"ontouchstart"in document.documentElement}},{key:"rendererType",get:function(){return nmm.renderer instanceof PIXI.CanvasRenderer?"canvas":"webgl"}},{key:"defaultResolution",get:function(){return{width:this.WIDTH,height:this.HEIGHT}}},{key:"devicePixelRatio",get:function(){if(!this._dpr){var e=window.devicePixelRatio;e=e<=2?e:2,this._dpr=e}return this._dpr}},{key:"pixi",get:function(){return{app:this._pixi,renderer:this._pixi.renderer,view:this._pixi.view,stage:this._pixi.stage}}},{key:"windowResolution",get:function(){return this._resize.windowResolution}},{key:"margins",get:function(){return this._resize.margins}},{key:"resolution",get:function(){return this._resize.resolution}},{key:"scale",get:function(){return this._resize.scale}},{key:"fsm",get:function(){return this._fsm}},{key:"assetsLoader",get:function(){return this._assetsLoader}}]),e}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}();nmm.cardTextures={},nmm.states.specificStates.components.CardComponent=function(e){function t(e){_classCallCheck(this,t);var s=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s._controller=e,s.EXPRESSION_SCALE=.5,s.selected=null,s._gameCardType=null,s._init(),s}return _inherits(t,PIXI.Container),_createClass(t,[{key:"clear",value:function(){this._expression.alpha=1,this._selector.hide(),this._expression.clear()}},{key:"disableOnEndLevel",value:function(){this._selector.hide(),this._expression.hideInput()}},{key:"disableSelector",value:function(){this._expression.alpha=1,this._selector.hide(),this._expression.resetInput(),this._bg.texture="small"===this._gameCardType?nmm.cardTextures.small:nmm.cardTextures.big}},{key:"enableSelector",value:function(){this._expression.alpha=.2,this._selector.show(),this._expression.hideInput(),this._bg.texture="small"===this._gameCardType?nmm.cardTextures.smallNoSelected:nmm.cardTextures.bigNoSelected}},{key:"wrongAnswer",value:function(e){this._expression.showCorrection(!1,80),this._expression.resetValue(),this._expression.inputField.setValue("")}},{key:"_positionExpression",value:function(e){var t=12===e.numberOfCards?128:256,s=this._expression.dim;this._expression.position.x=256-s.width/2*this.EXPRESSION_SCALE,this._expression.position.y=t/2-s.height/2*this.EXPRESSION_SCALE,this._expression.repositionInputField(e.calcs[this.key])}},{key:"_updateExpression",value:function(e){this._expression.update(e.calcs[this.key]),TweenLite.delayedCall(.002,function(){this._positionExpression(e)},[],this)}},{key:"update",value:function(e,t){this._gameCardType=12===e.numberOfCards?"small":"big";var s=12===e.numberOfCards?128:256;this.key=t,this._bg.texture=12===e.numberOfCards?nmm.cardTextures.smallNoSelected:nmm.cardTextures.bigNoSelected,this._selector.height=s,this._updateExpression(e)}},{key:"_callbackSelector",value:function(e){nmm.observer.publish("game-four-selector",{key:this.key})}},{key:"_addCardSelector",value:function(){if(!nmm.cardTextures.selector){var e=(new PIXI.Graphics).beginFill(16711680,0).drawRect(0,0,10,10).endFill();nmm.cardTextures.selector=e.generateTexture()}this._selector=new nmm.components.TexturedButton({texture:nmm.cardTextures.selector,autoHide:!0,callback:this._callbackSelectorBound}),this._selector.width=512,this.addChild(this._selector)}},{key:"_addExpression",value:function(){this._expression=new nmm.states.specificStates.components.ExpressionComponent("game-4"),this._expression.scale.set(this.EXPRESSION_SCALE),this.addChild(this._expression)}},{key:"_addBg",value:function(){this._bg=new PIXI.Sprite,this._bg.width=513,this.addChild(this._bg)}},{key:"_init",value:function(){nmm.cardTextures.small=nmm.cardTextures.small||PIXI.Texture.fromFrame("game_bg_small"),nmm.cardTextures.big=nmm.cardTextures.big||PIXI.Texture.fromFrame("game_bg_big"),nmm.cardTextures.smallNoSelected=nmm.cardTextures.smallNoSelected||PIXI.Texture.fromFrame("game_bg_small_no_selected"),nmm.cardTextures.bigNoSelected=nmm.cardTextures.bigNoSelected||PIXI.Texture.fromFrame("game_bg_big_no_selected"),this._callbackSelectorBound=this._callbackSelector.bind(this),this._addBg(),this._addExpression(),this._addCardSelector()}}]),t}();
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();nmm.states.specificStates.components.ExpressionComponent=function(t){function e(t){_classCallCheck(this,e);var i=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.MULTIPLY_WIDTH=83,i.EQUAL_WIDTH=78,i.SPACING=50,i._correctionPos=null,i._game=t,i.hidden=null,i.dim={width:0,height:136},i._init(),i}return _inherits(e,PIXI.Container),_createClass(e,[{key:"clear",value:function(){this._term1.clear(),this._term2.clear(),this._result.clear(),this.hideInput()}},{key:"hideInput",value:function(){this.inputField.hide()}},{key:"updateNumber",value:function(t,e){var i=void 0;"result"===t?i=this._result:"term2"===t?i=this._term2:"term1"===t&&(i=this._term1),this.hidden=t,void 0!==e&&null!==e&&""!==e?i.update(t,e):i.update()}},{key:"update",value:function(t){this.resetInput(),this._correction.hide(),this._term1.update("term1",t.term1,1),this._term2.update("term2",t.term2,1),this._result.update("result",t.result,1),this._repositionElements(t),"result"===t.hidden?this._result.update():"term2"===t.hidden?this._term2.update():"term1"===t.hidden&&this._term1.update()}},{key:"_changeHandler",value:function(t){var e=this.scale.x;this.scale.set(1);var i=this.parent._controller.currentGame;t?(t=(t=parseInt(t)).toString(),"result"===i.hidden?t=t.substring(0,3):"term2"===i.hidden?t=t.substring(0,i.term2.toString().length):"term1"===i.hidden&&(t=t.substring(0,i.term1.toString().length)),this.updateNumber(i.hidden,t)):this.updateNumber(i.hidden,t),this.inputField.setValue(t),"game-4"===this._game&&nmm.observer.publish("game-four-answer",{value:t,key:i.key}),this.hideCorrection(),this.scale.set(e)}},{key:"resetInput",value:function(){this.inputField.show(),this.inputField.setValue(""),this.inputField.focus()}},{key:"hideCorrection",value:function(){this._correction.hide()}},{key:"showCorrection",value:function(t,e){e=e||220,this._correction.show(t,{x:this._correctionPos,y:e},!1)}},{key:"wrongAnswer",value:function(){this.showCorrection(!1),this.inputField.hide()}},{key:"correctAnswer",value:function(){this.showCorrection(!0),this.inputField.hide()}},{key:"resetValue",value:function(t){"result"===t||"result"===this.hidden?this._result.update():"term2"===t||"term2"===this.hidden?this._term2.update():"term1"!==t&&"term1"!==this.hidden||this._term1.update()}},{key:"resetAnswer",value:function(t){this.resetInput(),this.resetValue(t)}},{key:"repositionInputField",value:function(t){var e=void 0,i=nmm.runtime.app.scale;TweenLite.delayedCall(.001,function(){"result"===t.hidden?e=this.toGlobal(this._result.position):"term2"===t.hidden?e=this.toGlobal(this._term2.position):"term1"===t.hidden&&(e=this.toGlobal(this._term1.position)),this.inputField.setPosition({left:(e.x-10)/i,top:e.y/i})},[],this)}},{key:"_repositionLine",value:function(t,e){this._line.position.x=t-20,this._line.width=e+40}},{key:"_repositionElements",value:function(t){var e=this._term1.dim,i=this._term2.dim,n=this._result.dim,s=null;s=e.width+this.SPACING,"term1"===t.hidden&&(this._repositionLine(0,e.width),this.inputField.setDimensions({width:e.width+40}),this._correctionPos=this._term1.position.x+e.width/2),this._multiply.position.x=s,s+=this.MULTIPLY_WIDTH+this.SPACING,this._term2.position.x=s,"term2"===t.hidden&&(this._repositionLine(s,i.width),this.inputField.setDimensions({width:i.width+20}),this._correctionPos=this._term2.position.x+i.width/2),s+=i.width+this.SPACING,this._equal.position.x=s,s+=this.EQUAL_WIDTH+this.SPACING,this._result.position.x=s,"result"===t.hidden&&(this._repositionLine(s,n.width),this.inputField.setDimensions({width:(n.width+40)*this.scale.x}),this._correctionPos=this._result.position.x+n.width/2),s+=n.width,this.dim.width=s}},{key:"_addCorrectionMC",value:function(){this._correction=new nmm.components.CorrectionMC,this.addChild(this._correction)}},{key:"_addInputField",value:function(){this.inputField=new nmm.dom.InputField({type:"number",height:94,display:"none",trackChange:!0,callback:this._changeHandler.bind(this)}),this.inputField.style.opacity=0,this.inputField.enable()}},{key:"_addLine",value:function(){this._line=new PIXI.Sprite(PIXI.Texture.fromFrame("answerLine")),this._line.position.y=140,this.addChild(this._line)}},{key:"_addSymbols",value:function(){this._multiply=new PIXI.Sprite(PIXI.Texture.fromFrame("font-multiply")),this._multiply.position.y=20,this.addChild(this._multiply),this._equal=new PIXI.Sprite(PIXI.Texture.fromFrame("font-equal")),this._equal.position.y=30,this.addChild(this._equal)}},{key:"_addNumbers",value:function(){this._term1=new nmm.states.specificStates.components.NumberComponent,this.addChild(this._term1),this._term2=new nmm.states.specificStates.components.NumberComponent,this.addChild(this._term2),this._result=new nmm.states.specificStates.components.NumberComponent,this.addChild(this._result)}},{key:"_init",value:function(){this._addNumbers(),this._addSymbols(),this._addLine(),this._addInputField(),this._addCorrectionMC()}}]),e}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}();nmm.foodTextures={},nmm.states.specificStates.components.FoodComponent=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._sprites=[],e}return _inherits(t,PIXI.Container),_createClass(t,[{key:"clear",value:function(){this._sprites.forEach(function(e){this.removeChild(e),nmm.pool.returnToPool(e)},this),this._sprites.splice(0)}},{key:"_compose",value:function(e,t,o){var r=void 0,n=this._sprites.length,s=void 0,i=void 0,u=void 0,a=void 0;for(nmm.foodTextures[e]=nmm.foodTextures[e]||PIXI.Texture.fromFrame("obj_"+e),s=nmm.foodTextures[e],r=0;r<n;r++)(i=this._sprites[r]).texture=s,u=r%t*160,a=95*Math.floor(r/t),i.position.set(u,a)}},{key:"_adjustNumberOfSprites",value:function(e){var t=this._sprites.length,o=t-e,r=void 0,n=void 0;if(o>0){for(r=e;r<t;r++)n=this._sprites[r],this.removeChild(n),nmm.pool.returnToPool(n);this._sprites.splice(e,o)}else if(o<0)for(r=0;r<Math.abs(o);r++)n=nmm.pool.borrowFromPool(),this._sprites.push(n),this.addChild(n)}},{key:"update",value:function(e,t,o){e=e||0,t=t||0,o=o||0,this._adjustNumberOfSprites(o.toString()),this._compose(e,t,o)}}]),t}();
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();nmm.states.specificStates.components.HelperComponent=function(t){function e(){_classCallCheck(this,e);var t=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._textures={animals:{},food:{}},t.CONTAINER_CENTER={x:446,y:260},t.NUMBER_SCALE=.4,t.FOOD_POSITION={x:40,y:40},t.MAX_SCALING={1:1,2:.92,3:.85,4:.78,5:.71,6:.58,7:.5,8:.45,9:.4,10:.36},t._init(),t}return _inherits(e,PIXI.Container),_createClass(e,[{key:"clear",value:function(){this._container.term1.clear(),this._container.term2.clear(),this._container.food.clear()}},{key:"updateFinalValue",value:function(t,e){t=t||"term2",this._container[t].update(t,e,this.NUMBER_SCALE)}},{key:"_boundsUpdate",value:function(){var t=nmm.runtime.app.scale,e=this._container.food.getBounds(),i=this._container.term1.getBounds(),n=this._container.term2.getBounds();e.width=e.width/t,e.height=e.height/t,i.width=i.width/t,i.height=i.height/t,n.width=n.width/t,n.height=n.height/t,this._container.term1.position.x=-i.width,this._container.term1.position.y=e.height/2+this.FOOD_POSITION.y-i.height/2,this._container.term2.position.x=e.width/2+this.FOOD_POSITION.x-n.width/2,this._container.lines.clear().lineStyle(2,16777215,1).moveTo(this.FOOD_POSITION.x,20).lineTo(this.FOOD_POSITION.x+e.width,20).moveTo(20,this.FOOD_POSITION.y).lineTo(20,this.FOOD_POSITION.y+e.height);var o=this._container.getBounds();o.width=o.width/t,o.height=o.height/t,this._container.position.set(this.CONTAINER_CENTER.x-o.width/2,this.CONTAINER_CENTER.y-o.height/2)}},{key:"update",value:function(t){this._textures.animals[t.term1]=this._textures.animals[t.term1]||PIXI.Texture.fromFrame("animal_"+t.term1),this._animal.texture=this._textures.animals[t.term1],this._container.food.update(t.term1,t.term2,t.result),this._container.term1.update("term1",t.term1,this.NUMBER_SCALE),"term2"===t.hidden?this._container.term2.updateInt("term2",this.NUMBER_SCALE):this._container.term2.update("term2",t.term2,this.NUMBER_SCALE),this._container.food.scale.set(Math.min(this.MAX_SCALING[t.term1],1.06-.07*t.term2)),TweenLite.delayedCall(.001,function(){this._boundsUpdate()},[],this)}},{key:"_addCentralContainer",value:function(){this._container=new PIXI.Container,this._container.food=new nmm.states.specificStates.components.FoodComponent,this._container.food.position.set(this.FOOD_POSITION.x,this.FOOD_POSITION.y),this._container.addChild(this._container.food),this._container.lines=new PIXI.Graphics,this._container.addChild(this._container.lines);var t=new PIXI.Sprite(PIXI.Texture.fromFrame("font-multiply"));t.scale.set(this.NUMBER_SCALE),this._container.addChild(t),this._container.term1=new nmm.states.specificStates.components.NumberComponent,this._container.addChild(this._container.term1),this._container.term2=new nmm.states.specificStates.components.NumberComponent,this._container.term2.position.y=-40,this._container.addChild(this._container.term2),this.addChild(this._container)}},{key:"_addAnimal",value:function(){this._animal=new PIXI.Sprite,this._animal.position.set(778,160),this.addChild(this._animal)}},{key:"_init",value:function(){this._addAnimal(),this._addCentralContainer()}}]),e}();
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();nmm.states.specificStates.components.InfoComponent=function(t){function e(t){_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n._controller=t,n.position.set(20,562),n.alpha=0,n._init(),n}return _inherits(e,PIXI.Container),_createClass(e,[{key:"_callback",value:function(){this.hide(),this._controller.endLevel()}},{key:"hide",value:function(){TweenLite.to(this,.5,{alpha:0})}},{key:"show",value:function(t){this._nameField.text=t.name,this._descriptionField.text=t.description,TweenLite.to(this,.5,{alpha:1}),TweenLite.delayedCall(.5,function(){this._nextBtn.show()},[],this)}},{key:"_addNextBtn",value:function(){this._nextBtn=new nmm.components.TexturedButton({texture:PIXI.Texture.fromFrame("btn_icon_arrow"),x:885,y:120,autoHide:!0,callback:this._callbackBound}),this._nextBtn.hide(),this.addChild(this._nextBtn)}},{key:"_addFields",value:function(){var t={fontFamily:"Arial",fontSize:"20px",fill:"#444444",fontWeight:"bold",wordWrap:!0,wordWrapWidth:946,lineHeight:28};this._nameField=new PIXI.Text("",t),this._nameField.position.set(20,20),this.addChild(this._nameField),t.fontWeight="normal",this._descriptionField=new PIXI.Text("",t),this._descriptionField.position.set(20,52),this.addChild(this._descriptionField)}},{key:"_addBg",value:function(){var t=new PIXI.Sprite(PIXI.Texture.fromFrame("info_bg"));this.addChild(t)}},{key:"_init",value:function(){this._callbackBound=this._callback.bind(this),this._addBg(),this._addFields(),this._addNextBtn()}}]),e}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();nmm.states.specificStates.components.MedalsTextColumnsView=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._columns={},e._textStyle={fontFamily:"Arial",fontSize:"20px",fill:"#FFFFFF"},e._medalTextures={},e.COL_1_2_X=92,e.COL_1_1_X=348,e._init(),e}return _inherits(t,PIXI.Container),_createClass(t,[{key:"show",value:function(e){var t=Object.keys(e.medals).length;t>5?(this._columns[1].visible=!0,this._columns[0].position.x=this.COL_1_2_X):(this._columns[1].visible=!1,this._columns[0].position.x=this.COL_1_1_X),this._medalTextures[e.currentlyOnGame]=this._medalTextures[e.currentlyOnGame]||PIXI.Texture.fromFrame("medal_"+e.currentlyOnGame);var n=void 0,i=this._medalTextures[e.currentlyOnGame],o=void 0,r=void 0,s=void 0;for(n=1;n<=t;n++)o=n<=5?0:1,s="medal-"+n,(r=this._columns[o].medals[s]).medal.texture=i,r.text.text=e.texts[s],r.alpha=e.medals[s]?1:.4}},{key:"_addMedal",value:function(){var e=new PIXI.Container,t=void 0,n=void 0;return t=new PIXI.Sprite,e.addChild(t),(n=new PIXI.Text("teste",this._textStyle)).position.set(60,20),e.medal=t,e.text=n,e.addChild(n),e}},{key:"_addColumn",value:function(e){var t=new PIXI.Container;t.position.set(92+513*e,322),t.medals={};var n,i;for(n=0;n<5;n++)(i=this._addMedal()).position.y=82*n,t.addChild(i),t.medals["medal-"+(n+1+5*e)]=i;this.addChild(t),this._columns[e]=t}},{key:"_init",value:function(){this._addColumn(0),this._addColumn(1)}}]),t}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}();nmm.numberComponentTextures={red:{},yellow:{},blue:{}},nmm.states.specificStates.components.NumberComponent=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.CHAR_WIDTH=94,e._sprites=[],e.dim={width:0,height:136},e}return _inherits(t,PIXI.Container),_createClass(t,[{key:"clear",value:function(){this._sprites.forEach(function(e){this.removeChild(e),nmm.pool.returnToPool(e)},this),this._sprites.splice(0)}},{key:"_compose",value:function(e,t){var r=t.length,o=void 0,s=void 0,n=void 0;switch(e){case"term1":n="red";break;case"term2":n="yellow";break;case"result":default:n="blue"}var i=0,u=void 0;for(this.scale.set(1),o=0;o<r;o++)s=t[o],u=this._sprites[o],nmm.numberComponentTextures[n][s]=nmm.numberComponentTextures[n][s]||PIXI.Texture.fromFrame("font-"+s+"-"+n),u.texture=nmm.numberComponentTextures[n][s],u.position.x=i,i+=this.CHAR_WIDTH+15;this.dim.width=i-15}},{key:"_adjustNumberOfSprites",value:function(e){var t=e.length,r=this._sprites.length,o=r-t,s=void 0,n=void 0;if(o>0){for(s=t;s<r;s++)n=this._sprites[s],this.removeChild(n),nmm.pool.returnToPool(n);this._sprites.splice(t,o)}else if(o<0)for(s=0;s<Math.abs(o);s++)n=nmm.pool.borrowFromPool(),this._sprites.push(n),this.addChild(n)}},{key:"updateInt",value:function(e,t){this.scale.set(1);this._adjustNumberOfSprites("i"),this._compose(e,"i"),this.scale.set(t||1)}},{key:"update",value:function(e,t,r){0===arguments.length?this.clear():(this.scale.set(1),t=t>=0?t.toString():"0",this._adjustNumberOfSprites(t),this._compose(e,t),this.scale.set(r||1))}}]),t}();
"use strict";nmm.app.config={destroyLoadingAfterInit:!1,backgroundColorDocument:1752220,tileURL:"static/assets/general/tile.png",transparent:!0,backgroundColorPIXI:null,DOMElements:!0,textures:{spriteSheets:{ss1:["static/assets/specific/app00/images/sprites/atlas00@1x.json"],ss2:["static/assets/specific/app00/images/sprites/atlas00@2x.json","static/assets/specific/app00/images/sprites/atlas01@2x.json","static/assets/specific/app00/images/sprites/atlas02@2x.json"]},logo:{ss1:"static/assets/general/logo.png",ss2:"static/assets/general/logo@2x.png"},otherTextures:[]},gameFourTexturePackage:[{label:"level-1",ss1:"static/assets/specific/app00/images/loose/game_animal_1.jpg",ss2:"static/assets/specific/app00/images/loose/game_animal_1.jpg"},{label:"level-2",ss1:"static/assets/specific/app00/images/loose/game_animal_2.jpg",ss2:"static/assets/specific/app00/images/loose/game_animal_2.jpg"},{label:"level-3",ss1:"static/assets/specific/app00/images/loose/game_animal_3.jpg",ss2:"static/assets/specific/app00/images/loose/game_animal_3.jpg"},{label:"level-4",ss1:"static/assets/specific/app00/images/loose/game_animal_4.jpg",ss2:"static/assets/specific/app00/images/loose/game_animal_4.jpg"},{label:"level-5",ss1:"static/assets/specific/app00/images/loose/game_animal_5.jpg",ss2:"static/assets/specific/app00/images/loose/game_animal_5.jpg"},{label:"level-6",ss1:"static/assets/specific/app00/images/loose/game_animal_6.jpg",ss2:"static/assets/specific/app00/images/loose/game_animal_6.jpg"},{label:"level-7",ss1:"static/assets/specific/app00/images/loose/game_animal_7.jpg",ss2:"static/assets/specific/app00/images/loose/game_animal_7.jpg"},{label:"level-8",ss1:"static/assets/specific/app00/images/loose/game_animal_8.jpg",ss2:"static/assets/specific/app00/images/loose/game_animal_8.jpg"},{label:"level-9",ss1:"static/assets/specific/app00/images/loose/game_animal_9.jpg",ss2:"static/assets/specific/app00/images/loose/game_animal_9.jpg"},{label:"level-10",ss1:"static/assets/specific/app00/images/loose/game_animal_10.jpg",ss2:"static/assets/specific/app00/images/loose/game_animal_10.jpg"}],audio:{alternateExtensions:[],files:[],spriteSheets:[{src:"static/assets/specific/app00/sound/audiosprite.mp3",data:{audioSprite:[{id:"silence",startTime:0,duration:1e3},{id:"correct",startTime:2e3,duration:1817.6643990929708},{id:"music",startTime:5e3,duration:24058.775510204083},{id:"wrong",startTime:31e3,duration:2433.1746031746065}]}}]},medals:{"game-1":{"medal-1":"JÃ¡ conheÃ§o a Tabuada do 1!","medal-2":"JÃ¡ conheÃ§o a Tabuada do 2!","medal-3":"JÃ¡ conheÃ§o a Tabuada do 3!","medal-4":"JÃ¡ conheÃ§o a Tabuada do 4!","medal-5":"JÃ¡ conheÃ§o a Tabuada do 5!","medal-6":"JÃ¡ conheÃ§o a Tabuada do 6!","medal-7":"JÃ¡ conheÃ§o a Tabuada do 7!","medal-8":"JÃ¡ conheÃ§o a Tabuada do 8!","medal-9":"JÃ¡ conheÃ§o a Tabuada do 9!","medal-10":"JÃ¡ conheÃ§o a Tabuada do 10!"},"game-2":{"medal-1":"Preenchi a Tabuada do 1!","medal-2":"Preenchi a Tabuada do 2!","medal-3":"Preenchi a Tabuada do 3!","medal-4":"Preenchi a Tabuada do 4!","medal-5":"Preenchi a Tabuada do 5!","medal-6":"Preenchi a Tabuada do 6!","medal-7":"Preenchi a Tabuada do 7!","medal-8":"Preenchi a Tabuada do 8!","medal-9":"Preenchi a Tabuada do 9!","medal-10":"Preenchi a Tabuada do 10!"},"game-3":{"medal-1":"Acertei 10 respostas!","medal-2":"Acertei 20 respostas!","medal-3":"Acertei 30 respostas!","medal-4":"Acertei 40 respostas!","medal-5":"Acertei 50 respostas!","medal-6":"Acertei 100 respostas!","medal-7":"Acertei 500 respostas!","medal-8":"Acertei 10 respostas seguidas!","medal-9":"Acertei 20 respostas seguidas!","medal-10":"Acertei 50 respostas seguidas!"},"game-4":{"medal-1":"Passei o nÃ­vel 1!","medal-2":"Passei o nÃ­vel 5!","medal-3":"Passei o nÃ­vel 8!","medal-4":"Passei o nÃ­vel 10!","medal-5":"Terminei o jogo com 3 vidas!"}}};
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();nmm.runtime.singletons=nmm.runtime.singletons||{},nmm.runtime.singletons.dataModel=null,nmm.app.DataModel=function(){function e(){return _classCallCheck(this,e),nmm.runtime.singletons.dataModel||(nmm.runtime.singletons.dataModel=this),nmm.runtime.singletons.dataModel}return _createClass(e,[{key:"setScoreData",value:function(){var e={correct:0,correctChain:0};this.storeData("score",e)}},{key:"setMedalData",value:function(){var e={"game-1":{},"game-2":{},"game-3":{},"game-4":{}},t=void 0;for(t=1;t<11;t++)e["game-1"]["medal-"+t]=!1,e["game-2"]["medal-"+t]=!1,e["game-3"]["medal-"+t]=!1,t<6&&(e["game-4"]["medal-"+t]=!1);this.storeData("medals",e)}},{key:"storeData",value:function(e,t){localStorage.setItem(e,JSON.stringify(t))}},{key:"breakScoreChain",value:function(){this._score.correctChain=0,this.storeData("score",this._score)}},{key:"storeCorrect",value:function(){return this._score.correct++,this._score.correctChain++,this.storeData("score",this._score),this._score}},{key:"storeMedal",value:function(e,t){var a=this.getData("medals");return!(!a||a["game-"+e]["medal-"+t])&&(a["game-"+e]["medal-"+t]=!0,this.storeData("medals",a),!0)}},{key:"getData",value:function(e){var t=localStorage.getItem(e);if(t)return JSON.parse(t)}},{key:"getMedals",value:function(e){var t=this.getData("medals");if(t){var a=t[e];if(a)return a}return{}}},{key:"init",value:function(){this.getData("medals")||this.setMedalData(),this.getData("score")||this.setScoreData(),this._score=this.getData("score")}}]),e}();
"use strict";function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,a){for(var s=0;s<a.length;s++){var o=a[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(a,s,o){return s&&e(a.prototype,s),o&&e(a,o),a}}();nmm.states.specificStates.models.GameFourModel=function(){function e(){_classCallCheck(this,e),this.level=null,this.lives=null,this.current=null,this.selected=null,this.correct=null,this.animalData={1:{name:"Coala",description:"O coala Ã© um mamÃ­fero marsupial que habita na AustrÃ¡lia. O coala alimenta-se exclusivamente de folhas de eucalipto e retira destas nÃ£o sÃ³ o alimento, mas tambÃ©m a Ã¡gua de que precisa."},2:{name:"Macaco",description:"Os macacos sÃ£o mamÃ­feros que, tal como nÃ³s, pertencem Ã  ordem dos primatas. Existem dezenas de espÃ©cies de macacos, e grande parte delas habitam em florestas tropicais da AmÃ©rica, Ãfrica e Ãsia."},3:{name:"HipopÃ³tamo",description:"Os hipopÃ³tamos sÃ£o mamÃ­feros herbÃ­voros. O hipopÃ³tamo-comum Ã© um animal de grande porte que vive em grupo, em rios da Ãfrica subsariana."},4:{name:"Coelho",description:"Os coelhos sÃ£o mamÃ­feros herbÃ­voros. Estes animais apresentam umas grandes orelhas, uma cauda curta, e correm muito depressa."},5:{name:"Porco",description:"Os porcos sÃ£o mamÃ­feros. Estes animais sÃ£o, tal como nÃ³s, omnÃ­voros, o que significa que se alimentam de frutas e vegetais, mas tambÃ©m de carne."},6:{name:"OuriÃ§o-cacheiro",description:"Os ouriÃ§o-cacheiros sÃ£o animais mamÃ­feros. Estes animais apresentam o corpo coberto de espinhos para se protegerem dos ataques de predadores, e alimentam-se de pequenos insetos."},7:{name:"Galo e galinha",description:"Galos e galinhas sÃ£o aves que se alimentam essencialmente de grÃ£os de milho. As galinhas pÃµe ovos, que depois de chocados dÃ£o origem aos pintainhos."},8:{name:"Urso",description:"Os ursos sÃ£o animais mamÃ­feros. O urso panda-gigante apresenta uma pelagem preta e branca e Ã© um animal omnÃ­voro, embora se alimente quase exclusivamente de folhas de bambu."},9:{name:"CÃ£o",description:"Os cÃ£es sÃ£o animais mamÃ­feros e foram, provavelmente, o primeiro animal a ser domesticado pelos humanos. Os cÃ£es sÃ£o carnÃ­voros e tÃªm um olfato muito apurado."},10:{name:"Pinguim",description:"Os pinguins sÃ£o aves e, consoante a espÃ©cie, podem alimentar-se de peixe ou de plÃ¢ncton. Estes animais sÃ£o caracterÃ­sticos do HemisfÃ©rio Sul."}}}return _createClass(e,[{key:"checkIfMedalLevel",value:function(){var e=null;switch(this.level){case 1:e=1;break;case 5:e=2;break;case 8:e=3;break;case 10:e=4}return e}},{key:"validateAnswer",value:function(e,a){e=parseInt(e);var s=this.current.calcs[a];return e===s[s.hidden]&&(this.correct++,!0)}},{key:"_getPossibleValues",value:function(e,a){var s=void 0,o=[],i=Math.max(e,a);for(s=1;s<=i;s++)s<=a?o.push(s):o.push(Math.round(1+Math.random()*(a-1)));return nmm.tools.utils.shuffleArray(o)}},{key:"_randomizeTermToHide",value:function(){var e=Math.round(60*Math.random());return e<=20?"term1":e>20&&e<=40?"term2":"result"}},{key:"_generateCalcs",value:function(e,a,s,o){var i=void 0,r=void 0,t=void 0,n=void 0,l=[],m=this._getPossibleValues(e,a),c=this._getPossibleValues(e,s);for(i=0;i<e;i++)r=m.pop(),t=c.pop(),n=Math.round(r*t),l.push({hidden:o||this._randomizeTermToHide(),term1:r,term2:t,result:n,key:i});return l}},{key:"newLevel",value:function(){var e=void 0,a=void 0,s=void 0,o=void 0;return 1===++this.level?(e=6,a=5,s=5,o="result"):2===this.level?(e=6,a=5,s=10,o="result"):3===this.level?(e=6,a=5,s=5):4===this.level?(e=6,a=5,s=10):this.level>4&&this.level<=7?(e=6,a=10,s=9):this.level>7&&(e=12,a=10,s=9),this.current={game:"game-4",level:this.level,numberOfCards:e,calcs:this._generateCalcs(e,a,s,o)},this.current}},{key:"reset",value:function(){this.level=0,this.lives=3}}]),e}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();nmm.states.specificStates.models.GameOneModel=function(){function e(){_classCallCheck(this,e),this.game=null,this.level=null,this.levelCount=0,this.difficulty=null,this.current=null}return _createClass(e,[{key:"generateExercise",value:function(){return this.levelCount++,this.current={game:this.game,hidden:"game-1"===this.game?"result":"term2",term1:this.level,term2:this.levelCount,result:this.level*this.levelCount},this.current}},{key:"validateAnswer",value:function(e){return"game-1"===this.current.game?this.current.result===parseInt(e):"game-2"===this.current.game?this.current.term2===parseInt(e):void 0}}]),e}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();nmm.states.specificStates.models.GameThreeModel=function(){function e(){_classCallCheck(this,e),this.game=null,this.difficulty=null,this.current=null,this.medalScore=[10,20,30,40,50,100,500],this.medalChain=[10,20,50]}return _createClass(e,[{key:"generateExercise",value:function(){var e=Math.round(1+9*Math.random()),t=Math.round(1+9*Math.random()),r=Math.round(e*t),n=void 0;if(1===this.difficulty||2===this.difficulty)n="result";else{var i=Math.round(60*Math.random());i<=20?n="term1":i>20&&i<=40?n="term2":i>40&&(n="result")}return this.current={game:this.game,difficulty:this.difficulty,hidden:n,term1:e,term2:t,result:r},this.current}},{key:"validateAnswer",value:function(e){return"result"===this.current.hidden?this.current.result===parseInt(e):"term2"===this.current.hidden?this.current.term2===parseInt(e):"term1"===this.current.hidden?this.current.term1=parseInt(e):void 0}},{key:"checkMedalScore",value:function(e){var t=void 0,r=this.medalScore.length;for(e=parseInt(e),t=0;t<r;t++)if(this.medalScore[t]===e)return t+1}},{key:"checkMedalChain",value:function(e){var t=void 0,r=this.medalChain.length;for(e=parseInt(e),t=0;t<r;t++)if(this.medalChain[t]===e)return t+8}}]),e}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();nmm.states.specificStates.models.MedalsModel=function(){function e(){_classCallCheck(this,e),this.currentlyOnGame=0,this.MAX=4,this._texts=nmm.app.config.medals}return _createClass(e,[{key:"showNext",value:function(){return this.currentlyOnGame++,{medals:this._medals["game-"+this.currentlyOnGame],texts:this._texts["game-"+this.currentlyOnGame],currentlyOnGame:this.currentlyOnGame,max:this.MAX}}},{key:"_resetData",value:function(){var e=nmm.dataModel.getData("medals");this._medals=e||{}}},{key:"reset",value:function(){this.currentlyOnGame=0,this._resetData()}}]),e}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_get=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)};nmm.states.specificStates.DifficultySelection=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.name="difficulty-selection",e._gameToGo=null,e}return _inherits(t,nmm.states.genericStates.TemplateState),_createClass(t,[{key:"animateOut",value:function(e){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"animateOut",this).call(this,e),this._view.disableBtns()}},{key:"_stateIn",value:function(){this._view.enableBtns()}},{key:"btnClicked",value:function(e){"menu"===e?nmm.runtime.app.fsm.changeState("menu"):(this._gameToGo=this._gameToGo||"game-3",nmm.runtime.app.fsm.changeState(this._gameToGo,{game:this._gameToGo,difficulty:e}))}},{key:"setParams",value:function(e){this._gameToGo=e.game}},{key:"_addView",value:function(){this._view=new nmm.states.specificStates.views.DifficultySelectionView(this),this.addChild(this._view)}},{key:"_init",value:function(){this._addView()}}]),t}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),_get=function e(t,i,s){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,i);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,i,s)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(s)};nmm.states.specificStates.GameFour=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.name="game-4",e.ANSWER_INTERVAL=1.5,e._delayedTween=null,e._timerTween={},e}return _inherits(t,nmm.states.genericStates.TemplateState),_createClass(t,[{key:"_clearAllTimers",value:function(){var e;for(e in this._timerTween)this._timerTween.hasOwnProperty(e)&&this._timerTween[e].kill()}},{key:"_stateOut",value:function(){this._viewGame.clear()}},{key:"animateOut",value:function(e){this._clearAllTimers(),nmm.observer.unsubscribe("game-four-selector",this.selectorChange,this),nmm.observer.unsubscribe("game-four-answer",this.answer,this),_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"animateOut",this).call(this,e),this._viewGame.disableBtns()}},{key:"_stateIn",value:function(){this._viewGame.enableBtns()}},{key:"animateIn",value:function(){nmm.observer.subscribe("game-four-selector",this.selectorChange,this),nmm.observer.subscribe("game-four-answer",this.answer,this),this._model.reset(),this._viewGame.dummyField.show(),this._newLevel(),_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"animateIn",this).call(this)}},{key:"selectorChange",value:function(e){this._model.selected=e.key,this._viewGame.manageSelectors(e.key)}},{key:"answer",value:function(e){this._timerTween[e.key]&&this._timerTween[e.key].kill(),this._timerTween[e.key]=TweenLite.delayedCall(this.ANSWER_INTERVAL,function(){if(this._model.validateAnswer(e.value,e.key)){if(this._viewGame.removeCard(e.key),this._model.selected===e.key&&(this._model.selected=this._viewGame.manageSelectors()),this._model.correct===this._model.current.numberOfCards){createjs.Sound.play("correct"),this._viewGame.dummyField.focus();var t=this._model.checkIfMedalLevel();t&&nmm.dataModel.storeMedal(4,t)&&this._showMedal(t),this._viewGame.info.show(this._model.animalData[this._model.level]),10===this._model.level&&3===this._model.lives&&nmm.dataModel.storeMedal(4,5)&&this._showMedal(5)}}else createjs.Sound.play("wrong"),this._viewGame.wrongAnswer(e.key),0===--this._model.lives&&(this._viewGame.disableCards(),0===this._model.correct&&this._viewGame.resetAnimalTexture(),TweenLite.delayedCall(1,function(){nmm.runtime.app.fsm.changeState("game-over",{stateToGoAfter:"menu",success:!1})},[],this))},[],this)}},{key:"btnClicked",value:function(e){"menu"===e&&(this._viewGame.disableBtns(),this._delayedTween&&this._delayedTween.kill(),nmm.runtime.app.fsm.changeState("menu"))}},{key:"_showGame",value:function(){this._viewGame.update(this._model.current),this.selectorChange({key:0}),TweenLite.to(this._viewGame,.5,{alpha:1})}},{key:"_showLevelNumber",value:function(){TweenLite.to(this._viewGame,.5,{alpha:0}),TweenLite.delayedCall(2,function(){this._viewGame.resetAnimalTexture(),this._showGame()},[],this)}},{key:"_newLevel",value:function(){this._viewGame.dummyField.focus(),this._timerTween={},this._model.selected=0,this._model.correct=0;var e=this._model.newLevel();this._levelNumberView.update(e.level),this._showLevelNumber()}},{key:"endLevel",value:function(){this._model.level<10?this._newLevel():10===this._model.level&&nmm.runtime.app.fsm.changeState("game-over",{stateToGoAfter:"menu",success:!0})}},{key:"_showMedal",value:function(e){this._medalPopup.show(4,e)}},{key:"_addMedalPopupComponent",value:function(){this._medalPopup=new nmm.components.MedalPopupComponent([PIXI.Texture.fromFrame("medal_1"),PIXI.Texture.fromFrame("medal_2"),PIXI.Texture.fromFrame("medal_3"),PIXI.Texture.fromFrame("medal_4")]),this.addChild(this._medalPopup)}},{key:"_addViews",value:function(){this._levelNumberView=new nmm.states.specificStates.views.LevelNumberView,this.addChild(this._levelNumberView),this._viewGame=new nmm.states.specificStates.views.GameFourView(this),this._viewGame.alpha=0,this.addChild(this._viewGame),this._addMedalPopupComponent()}},{key:"_init",value:function(){this._model=new nmm.states.specificStates.models.GameFourModel,this._addViews()}},{key:"currentGame",get:function(){return this._model.current.calcs[this._model.selected]}}]),t}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_get=function e(t,n,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in a)return a.value;var s=a.get;if(void 0!==s)return s.call(i)};nmm.states.specificStates.GameOne=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.name="game-1",e._delayedTween=null,e}return _inherits(t,nmm.states.genericStates.TemplateState),_createClass(t,[{key:"_stateOut",value:function(){this._view.clear(),this._view.disableBtns()}},{key:"animateIn",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"animateIn",this).call(this),this._newExercise(),this._view.dummyField.show()}},{key:"btnClicked",value:function(e){if("menu"===e)this._view.disableBtns(),this._delayedTween&&this._delayedTween.kill(),nmm.runtime.app.fsm.changeState("menu");else{var t=this._view.inputValue;this._model.validateAnswer(parseInt(t))?(createjs.Sound.play("correct"),this._view.showCorrect(),"term2"===this._model.current.hidden&&this._view.updateFinalValue("term2",t),this._delayedTween=TweenLite.delayedCall(2,function(){this._newExercise()},[],this)):(createjs.Sound.play("wrong"),this._view.showWrong(),this._delayedTween=TweenLite.delayedCall(2,function(){this._view.allowNewAnswer()},[],this))}}},{key:"_endGame",value:function(){nmm.runtime.app.fsm.changeState("game-over",{stateToGoAfter:"tab-selection",game:this._model.game,success:!0})}},{key:"_newExercise",value:function(){if(this._model.levelCount<10){var e=this._model.generateExercise();this._view.update(e)}else{var t="game-1"===this._model.game?1:2;nmm.dataModel.storeMedal(t,this._model.level)?(this._view.showMedal(t,this._model.level),this._delayedTween=TweenLite.delayedCall(2,function(){this._endGame()},[],this)):this._endGame()}}},{key:"_addView",value:function(){this._view=new nmm.states.specificStates.views.GameOneView(this),this.addChild(this._view)}},{key:"setParams",value:function(e){this._model.game=e.game,this._model.level=e.level,this._model.levelCount=0}},{key:"_init",value:function(){this._model=new nmm.states.specificStates.models.GameOneModel,this._addView()}},{key:"currentGame",get:function(){return this._model.current}},{key:"currentGameType",get:function(){return this._model.game}},{key:"currentlyHidden",get:function(){return this._model.current.hidden}}]),t}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();nmm.states.specificStates.GameOver=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.name="game-over",e}return _inherits(t,nmm.states.genericStates.TemplateState),_createClass(t,[{key:"_stateIn",value:function(){TweenLite.delayedCall(3,function(){nmm.runtime.app.fsm.changeState(this._stateToGoAfter,{game:this._game})},[],this)}},{key:"setParams",value:function(e){this._stateToGoAfter=e.stateToGoAfter,this._game=e.game;var t=e.success;this._view.update(t)}},{key:"_addView",value:function(){this._view=new nmm.states.specificStates.views.GameOverView,this.addChild(this._view)}},{key:"_init",value:function(){this._addView()}}]),t}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_get=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(i)};nmm.states.specificStates.GameThree=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.name="game-3",e._delayedTween=null,e}return _inherits(t,nmm.states.genericStates.TemplateState),_createClass(t,[{key:"_stateOut",value:function(){this._view.clear(),this._view.disableBtns()}},{key:"animateIn",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"animateIn",this).call(this),this._newExercise(!0),nmm.dataModel.breakScoreChain(),this._view.dummyField.show()}},{key:"btnClicked",value:function(e){if("menu"===e)this._view.disableBtns(),this._delayedTween&&this._delayedTween.kill(),nmm.runtime.app.fsm.changeState("menu");else{var t=this._view.inputValue;if(this._model.validateAnswer(parseInt(t))){createjs.Sound.play("correct"),this._view.showCorrect();var n=nmm.dataModel.storeCorrect();"term2"===this._model.current.hidden&&this._view.updateFinalValue("term2",t);var i=this._model.checkMedalScore(n.correct),r=this._model.checkMedalChain(n.correctChain);i&&nmm.dataModel.storeMedal(3,i)&&this._view.showMedal(3,i),r&&nmm.dataModel.storeMedal(3,r)&&this._view.showMedal(3,r),this._delayedTween=TweenLite.delayedCall(2,function(){this._newExercise()},[],this)}else createjs.Sound.play("wrong"),this._view.showWrong(),nmm.dataModel.breakScoreChain(),this._delayedTween=TweenLite.delayedCall(2,function(){this._view.allowNewAnswer()},[],this)}}},{key:"_newExercise",value:function(e){var t=this._model.generateExercise();this._view.update(t,e)}},{key:"_addView",value:function(){this._view=new nmm.states.specificStates.views.GameThreeView(this),this.addChild(this._view)}},{key:"setParams",value:function(e){this._model.game=e.game,this._model.difficulty=e.difficulty}},{key:"_init",value:function(){this._model=new nmm.states.specificStates.models.GameThreeModel,this._addView()}},{key:"currentGame",get:function(){return this._model.current}},{key:"currentGameType",get:function(){return this._model.game}},{key:"currentlyHidden",get:function(){return this._model.current.hidden}}]),t}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_get=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)};nmm.states.specificStates.Medals=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.name="medals",e}return _inherits(t,nmm.states.genericStates.TemplateState),_createClass(t,[{key:"_stateIn",value:function(){this._view.enableBtns()}},{key:"animateOut",value:function(e){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"animateOut",this).call(this,e),this._view.disableBtns()}},{key:"animateIn",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"animateIn",this).call(this),this._reset()}},{key:"changeState",value:function(e){nmm.runtime.app.fsm.changeState(e)}},{key:"btnClicked",value:function(e){"menu"===e?this.changeState("menu"):"next"===e&&this.goNext()}},{key:"goNext",value:function(){var e=this._model.showNext();this._view.show(e)}},{key:"_reset",value:function(){this._model.reset(),this._view.reset(),this.goNext()}},{key:"_addView",value:function(){this._view=new nmm.states.specificStates.views.MedalsView(this),this.addChild(this._view)}},{key:"_init",value:function(){this._model=new nmm.states.specificStates.models.MedalsModel,this._addView()}}]),t}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();nmm.states.specificStates.Menu=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.name="menu",e}return _inherits(t,nmm.states.genericStates.TemplateState),_createClass(t,[{key:"_stateOut",value:function(){nmm.runtime.app.touchSupport&&(nmm.observer.unsubscribe("resize",this.windowRotationCheck,this),this.windowRotationCheck()),this._view.clear()}},{key:"_stateIn",value:function(){nmm.runtime.app.touchSupport&&(nmm.observer.subscribe("resize",this.windowRotationCheck,this),this.windowRotationCheck()),this._view.enableBtns()}},{key:"windowRotationCheck",value:function(){var e=nmm.runtime.app.windowResolution;e.width>e.height?this._view.showRotatePhone():this._view.hideRotatePhone()}},{key:"_checkIfPackageLoaded",value:function(){var e=void 0,t=nmm.runtime.app.assetsLoader.loader.resources;for(e in t)if(t.hasOwnProperty(e)&&t[e].name===nmm.app.config.gameFourTexturePackage[0].label)return!0;return!1}},{key:"changeState",value:function(e){switch(this._view.disableBtns(),e){case"game-1":nmm.runtime.app.fsm.changeState("tab-selection",{game:"game-1"});break;case"game-2":nmm.runtime.app.fsm.changeState("tab-selection",{game:"game-2"});break;case"game-3":nmm.runtime.app.fsm.changeState("difficulty-selection",{game:"game-3"});break;case"game-4":this._checkIfPackageLoaded()?nmm.runtime.app.fsm.changeState("game-4"):(nmm.runtime.app.fsm.changeState("loading"),nmm.runtime.app.fsm.getStateByName("loading").loadSecondaryAssets(nmm.app.config.gameFourTexturePackage,"game-4",!0));break;default:nmm.runtime.app.fsm.changeState(e)}}},{key:"_addView",value:function(){this._view=new nmm.states.specificStates.views.MenuView(this),this.addChild(this._view)}},{key:"_init",value:function(){this._addView(),nmm.pool=new nmm.tools.Pool(130);var e=createjs.Sound.play("music");e.volume=.5,e.loop=Number.MAX_SAFE_INTEGER}}]),t}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),_get=function e(t,n,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,o)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(o)};nmm.states.specificStates.TabSelection=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.name="tab-selection",e._gameToGo=null,e}return _inherits(t,nmm.states.genericStates.TemplateState),_createClass(t,[{key:"animateOut",value:function(e){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"animateOut",this).call(this,e),this._view.disableBtns()}},{key:"_stateIn",value:function(){this._view.enableBtns()}},{key:"btnClicked",value:function(e){"menu"===e?nmm.runtime.app.fsm.changeState("menu"):(this._gameToGo=this._gameToGo||"game-1",nmm.runtime.app.fsm.changeState("game-1",{game:this._gameToGo,level:e}))}},{key:"setParams",value:function(e){this._gameToGo=e.game}},{key:"_addView",value:function(){this._view=new nmm.states.specificStates.views.TabSelectionView(this),this.addChild(this._view)}},{key:"_init",value:function(){this._addView()}}]),t}();
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();nmm.states.specificStates.views.DifficultySelectionView=function(t){function e(t){_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n._controller=t,n._btns=[],n.BTN_SPACING=48,n.BTN_HEIGHT=88,n._init(),n}return _inherits(e,PIXI.Container),_createClass(e,[{key:"disableBtns",value:function(){this._btns.forEach(function(t){t.disable()})}},{key:"enableBtns",value:function(){this._btns.forEach(function(t){t.enable()})}},{key:"_callback",value:function(t,e,n,i){this._controller.btnClicked(e)}},{key:"_addBtns",value:function(){var t,e,n,i=["btn_easy","btn_medium","btn_hard","btn_home_big"];for(t=0;t<4;t++)n=t<3?t+1:"menu",e=new nmm.components.TexturedButton({texture:PIXI.Texture.fromFrame(i[t]),key:n,x:332,y:190+t*(this.BTN_SPACING+this.BTN_HEIGHT),callback:this._callbackBound}),this.addChild(e),this._btns.push(e)}},{key:"_addTitle",value:function(){var t=new PIXI.Sprite(PIXI.Texture.fromFrame("sub_title_1"));t.anchor.set(.5),t.position.set(512,106),this.addChild(t)}},{key:"_init",value:function(){this._callbackBound=this._callback.bind(this),this._addTitle(),this._addBtns()}}]),e}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();nmm.states.specificStates.views.GameFourView=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._controller=e,n._cardsPool=[],n._cardsOnStage=[],n._delayedCall=null,n._init(),n}return _inherits(t,PIXI.Container),_createClass(t,[{key:"clear",value:function(){this._cardsOnStage.forEach(function(e){this.removeChild(e),e.clear(),this._cardsPool.push(e)},this),this._cardsOnStage=[],this._delayedCall&&this._delayedCall.kill(),this.resetAnimalTexture(),this.info.hide(),this.dummyField.hide()}},{key:"resetAnimalTexture",value:function(){this._animalPicture.texture=PIXI.Texture.EMPTY}},{key:"disableBtns",value:function(){this._homeBtn.disable()}},{key:"enableBtns",value:function(){this._homeBtn.enable()}},{key:"disableCards",value:function(){this._cardsOnStage.forEach(function(e){e.disableOnEndLevel()})}},{key:"_findIndexOfCardOnStageList",value:function(e){var t=void 0,n=this._cardsOnStage.length;for(t=0;t<n;t++)if(this._cardsOnStage[t].key===e)return t}},{key:"wrongAnswer",value:function(e){this._lives.takeLive();var t=this._findIndexOfCardOnStageList(e);this._cardsOnStage[t].wrongAnswer()}},{key:"_tweenCardOut",value:function(e){TweenLite.to(e,.5,{alpha:0}),this._delayedCall=TweenLite.delayedCall(.5,function(){e.clear();var t=this._findIndexOfCardOnStageList(e.key);this.removeChild(e),this._cardsOnStage.splice(t,1),this._cardsPool.push(e)},[],this)}},{key:"removeCard",value:function(e){this._cardsOnStage.forEach(function(t){e===t.key&&this._tweenCardOut(t)},this)}},{key:"_searchForFirstNotSelected",value:function(){var e=void 0,t=this._cardsOnStage.length;for(e=0;e<t;e++)if(!this._cardsOnStage[e].selected)return this._cardsOnStage[e].key}},{key:"manageSelectors",value:function(e){return e=e||this._searchForFirstNotSelected(),this._cardsOnStage.forEach(function(t){t.key===e?(t.disableSelector(),t.selected=!0):(t.enableSelector(),t.selected=!1)}),e}},{key:"_placeCards",value:function(e){var t,n,i,a,s=e.numberOfCards,r=768/(s/2);for(t=0;t<s;t++)i=t%2*512,a=Math.floor(t/2)*r,(n=this._cardsPool.pop()).alpha=1,n.position.set(i,a),n.update(e,t),this.addChild(n),this._cardsOnStage.push(n)}},{key:"update",value:function(e){1===e.level&&this._lives.reset(),TweenLite.delayedCall(.5,function(){this._animalPicture.texture=PIXI.Texture.fromImage("level-"+e.level)},[],this),this._placeCards(e),this.setChildIndex(this._lives,this.children.length-1),this.setChildIndex(this._homeBtn,this.children.length-1)}},{key:"_callback",value:function(e,t,n,i){this._controller.btnClicked(t)}},{key:"_addDummyField",value:function(){this.dummyField=new nmm.dom.InputField({top:768,left:1024,type:"number",width:1,height:1,display:"block",trackChange:!1}),this.dummyField.style.opacity=0}},{key:"_addHomeBtn",value:function(){this._homeBtn=new nmm.components.TexturedButton({texture:PIXI.Texture.fromFrame("btn_icon_home"),x:10,y:10,key:"menu",callback:this._callbackBound}),this.addChild(this._homeBtn)}},{key:"_addInfo",value:function(){this.info=new nmm.states.specificStates.components.InfoComponent(this._controller),this.addChild(this.info)}},{key:"_addLivesCounter",value:function(){this._lives=new nmm.components.LiveCounter(3,0),this._lives.position.set(995,25),this.addChild(this._lives)}},{key:"_addCards",value:function(){var e,t;for(e=0;e<12;e++)t=new nmm.states.specificStates.components.CardComponent(this._controller),this._cardsPool.push(t)}},{key:"_addAnimalPicture",value:function(){this._animalPicture=new PIXI.Sprite,this.addChild(this._animalPicture)}},{key:"_init",value:function(){this._callbackBound=this._callback.bind(this),this._addAnimalPicture(),this._addCards(),this._addLivesCounter(),this._addInfo(),this._addHomeBtn(),this._addDummyField()}}]),t}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();nmm.states.specificStates.views.GameOneView=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._controller=e,n.EXPRESSION_SCALE=.8,n._init(),n}return _inherits(t,PIXI.Container),_createClass(t,[{key:"clear",value:function(){this._helperComponent.clear(),this._expressionComponent.clear(),this.dummyField.hide()}},{key:"disableBtns",value:function(){this._homeBtn.disable(),this._answerBtn.disable()}},{key:"enableBtns",value:function(){this._homeBtn.enable(),this._answerBtn.show()}},{key:"_fadeOutComponents",value:function(e){this.disableBtns(),TweenLite.to(this._helperComponent._container,e,{alpha:0}),TweenLite.to(this._expressionComponent,e,{alpha:0})}},{key:"_fadeInComponents",value:function(e){TweenLite.to(this._helperComponent._container,e,{alpha:1}),TweenLite.to(this._expressionComponent,e,{alpha:1}),TweenLite.delayedCall(e,function(){this.enableBtns()},[],this)}},{key:"showMedal",value:function(e,t){this._medalPopup.show(e,t)}},{key:"allowNewAnswer",value:function(){this._expressionComponent.resetAnswer(this._controller.currentlyHidden),this._answerBtn.show()}},{key:"showWrong",value:function(){this._expressionComponent.wrongAnswer(),this.dummyField.focus()}},{key:"showCorrect",value:function(){this._expressionComponent.correctAnswer(),this.dummyField.focus()}},{key:"_updateComponents",value:function(e){this._helperComponent.update(e),this._expressionComponent.update(e),this._expressionComponent.position.x=512-this._expressionComponent.dim.width/2*this.EXPRESSION_SCALE,this._expressionComponent.repositionInputField(e)}},{key:"update",value:function(e){1===e.term2?(this._updateComponents(e),this._fadeInComponents()):(this._fadeOutComponents(.2),TweenLite.delayedCall(.2,function(){this._updateComponents(e),this._fadeInComponents()},[],this))}},{key:"updateFinalValue",value:function(e,t){this._helperComponent.updateFinalValue(e,t)}},{key:"_callback",value:function(e,t,n,o){this._controller.btnClicked(t)}},{key:"_addDummyField",value:function(){this.dummyField=new nmm.dom.InputField({top:768,left:1024,type:"number",width:1,height:1,display:"block",trackChange:!1}),this.dummyField.style.opacity=0}},{key:"_addMedalPopupComponent",value:function(){this._medalPopup=new nmm.components.MedalPopupComponent([PIXI.Texture.fromFrame("medal_1"),PIXI.Texture.fromFrame("medal_2"),PIXI.Texture.fromFrame("medal_3"),PIXI.Texture.fromFrame("medal_4")]),this.addChild(this._medalPopup)}},{key:"_addExpressionComponent",value:function(){this._expressionComponent=new nmm.states.specificStates.components.ExpressionComponent,this._expressionComponent.y=467,this._expressionComponent.scale.set(this.EXPRESSION_SCALE),this.addChild(this._expressionComponent)}},{key:"_addHelperComponent",value:function(){this._helperComponent=new nmm.states.specificStates.components.HelperComponent,this.addChild(this._helperComponent)}},{key:"_addAnswerBtn",value:function(){this._answerBtn=new nmm.components.TexturedButton({texture:PIXI.Texture.fromFrame("btn_answer"),x:333,y:652,key:"answer",autoHide:!0,callback:this._callbackBound,keyCode:13}),this.addChild(this._answerBtn)}},{key:"_addHomeBtn",value:function(){this._homeBtn=new nmm.components.TexturedButton({texture:PIXI.Texture.fromFrame("btn_icon_home"),x:10,y:10,key:"menu",callback:this._callbackBound}),this.addChild(this._homeBtn)}},{key:"_init",value:function(){this._callbackBound=this._callback.bind(this),this._addHomeBtn(),this._addAnswerBtn(),this._addHelperComponent(),this._addExpressionComponent(),this._addMedalPopupComponent(),this._addDummyField()}},{key:"inputValue",get:function(){return this._expressionComponent.inputField.getValue()}}]),t}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();nmm.states.specificStates.views.GameOverView=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._init(),e}return _inherits(t,PIXI.Container),_createClass(t,[{key:"update",value:function(e){this._mc.gotoAndStop(e)}},{key:"_addMC",value:function(){this._mc=new PIXI.extras.AnimatedSprite([PIXI.Texture.fromFrame("retry"),PIXI.Texture.fromFrame("success")]),this._mc.anchor.set(.5),this._mc.position.set(512,384),this._mc.rotation=-Math.PI/8.2,this.addChild(this._mc)}},{key:"_init",value:function(){this._addMC()}}]),t}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();nmm.states.specificStates.views.GameThreeView=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._controller=e,n.EXPRESSION_SCALE=.8,n._init(),n}return _inherits(t,PIXI.Container),_createClass(t,[{key:"clear",value:function(){this._helperComponent.clear(),this._expressionComponent.clear(),this.dummyField.hide()}},{key:"disableBtns",value:function(){this._homeBtn.disable(),this._answerBtn.disable()}},{key:"enableBtns",value:function(){this._homeBtn.enable(),this._answerBtn.show()}},{key:"_fadeOutComponents",value:function(e){this.disableBtns(),TweenLite.to(this._helperComponent._container,e,{alpha:0}),TweenLite.to(this._expressionComponent,e,{alpha:0})}},{key:"_fadeInComponents",value:function(e){TweenLite.to(this._helperComponent._container,e,{alpha:1}),TweenLite.to(this._expressionComponent,e,{alpha:1}),TweenLite.delayedCall(e,function(){this.enableBtns()},[],this)}},{key:"showMedal",value:function(e,t){this._medalPopup.show(e,t)}},{key:"allowNewAnswer",value:function(){this._expressionComponent.resetAnswer(this._controller.currentlyHidden),this._answerBtn.show()}},{key:"showWrong",value:function(){this._expressionComponent.wrongAnswer(),this.dummyField.focus()}},{key:"showCorrect",value:function(){this._expressionComponent.correctAnswer(),this.dummyField.focus()}},{key:"_updateComponents",value:function(e){1===e.difficulty&&this._helperComponent.update(e),this._expressionComponent.update(e),this._expressionComponent.position.x=512-this._expressionComponent.dim.width/2*this.EXPRESSION_SCALE,TweenLite.delayedCall(.001,function(){this._expressionComponent.repositionInputField(e)},[],this)}},{key:"update",value:function(e,t){t?(this._updateComponents(e),this._fadeInComponents(e),1===e.difficulty?(this._helperComponent.visible=!0,this._expressionComponent.y=467):(this._helperComponent.visible=!1,this._expressionComponent.y=250)):(this._fadeOutComponents(.2),TweenLite.delayedCall(.2,function(){this._updateComponents(e),this._fadeInComponents()},[],this))}},{key:"updateFinalValue",value:function(e,t){this._helperComponent.updateFinalValue(e,t)}},{key:"_callback",value:function(e,t,n,o){this._controller.btnClicked(t)}},{key:"_addDummyField",value:function(){this.dummyField=new nmm.dom.InputField({top:768,left:1024,type:"number",width:1,height:1,display:"block",trackChange:!1}),this.dummyField.style.opacity=0}},{key:"_addMedalPopupComponent",value:function(){this._medalPopup=new nmm.components.MedalPopupComponent([PIXI.Texture.fromFrame("medal_1"),PIXI.Texture.fromFrame("medal_2"),PIXI.Texture.fromFrame("medal_3"),PIXI.Texture.fromFrame("medal_4")]),this.addChild(this._medalPopup)}},{key:"_addExpressionComponent",value:function(){this._expressionComponent=new nmm.states.specificStates.components.ExpressionComponent,this._expressionComponent.scale.set(this.EXPRESSION_SCALE),this.addChild(this._expressionComponent)}},{key:"_addHelperComponent",value:function(){this._helperComponent=new nmm.states.specificStates.components.HelperComponent,this.addChild(this._helperComponent)}},{key:"_addAnswerBtn",value:function(){this._answerBtn=new nmm.components.TexturedButton({texture:PIXI.Texture.fromFrame("btn_answer"),x:333,y:652,key:"answer",autoHide:!0,callback:this._callbackBound,keyCode:13}),this.addChild(this._answerBtn)}},{key:"_addHomeBtn",value:function(){this._homeBtn=new nmm.components.TexturedButton({texture:PIXI.Texture.fromFrame("btn_icon_home"),x:10,y:10,key:"menu",callback:this._callbackBound}),this.addChild(this._homeBtn)}},{key:"_init",value:function(){this._callbackBound=this._callback.bind(this),this._addHomeBtn(),this._addAnswerBtn(),this._addHelperComponent(),this._addExpressionComponent(),this._addMedalPopupComponent(),this._addDummyField()}},{key:"inputValue",get:function(){return this._expressionComponent.inputField.getValue()}}]),t}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();nmm.states.specificStates.views.LevelNumberView=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._init(),e}return _inherits(t,PIXI.Container),_createClass(t,[{key:"update",value:function(e){this._field.text="NÃ­vel "+e}},{key:"_addField",value:function(){this._field=new PIXI.Text("",{fontFamily:"Arial",fontSize:"80px",fill:"#FFFFFF"}),this._field.anchor.set(.5),this._field.position.set(512,378),this.addChild(this._field)}},{key:"_init",value:function(){this._addField()}}]),t}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();nmm.states.specificStates.views.MedalsView=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._controller=e,n._iconTextures={},n._init(),n}return _inherits(t,PIXI.Container),_createClass(t,[{key:"show",value:function(e){this._iconTextures["icon_"+e.currentlyOnGame]=this._iconTextures["icon_"+e.currentlyOnGame]||PIXI.Texture.fromFrame("btn_option_"+(e.currentlyOnGame-1)),this._gameIcon.texture=this._iconTextures["icon_"+e.currentlyOnGame],this._info.show(e),e.currentlyOnGame===e.max&&(this._nextBtn.visible=!1,this._nextBtn.disable())}},{key:"reset",value:function(){this._nextBtn.visible=!0}},{key:"disableBtns",value:function(){this._homeBtn.disable(),this._nextBtn.disable()}},{key:"enableBtns",value:function(){this._homeBtn.enable(),this._nextBtn.enable()}},{key:"_callback",value:function(e,t,n,i){this._controller.btnClicked(t)}},{key:"_addInfo",value:function(){this._info=new nmm.states.specificStates.components.MedalsTextColumnsView,this.addChild(this._info)}},{key:"_addNextBtn",value:function(){this._nextBtn=new nmm.components.TexturedButton({texture:PIXI.Texture.fromFrame("btn_icon_arrow"),x:936,y:712,key:"next",callback:this._callbackBound}),this.addChild(this._nextBtn)}},{key:"_addHomeBtn",value:function(){this._homeBtn=new nmm.components.TexturedButton({texture:PIXI.Texture.fromFrame("btn_icon_home"),x:10,y:10,key:"menu",callback:this._callbackBound}),this.addChild(this._homeBtn)}},{key:"_addGameIcon",value:function(){this._gameIcon=new PIXI.Sprite,this._gameIcon.position.set(334,182),this.addChild(this._gameIcon)}},{key:"_addTitle",value:function(){var e=new PIXI.Sprite(PIXI.Texture.fromFrame("sub_title_2"));e.anchor.set(.5),e.position.set(512,106),this.addChild(e)}},{key:"_init",value:function(){this._callbackBound=this._callback.bind(this),this._addTitle(),this._addGameIcon(),this._addHomeBtn(),this._addNextBtn(),this._addInfo()}}]),t}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();nmm.states.specificStates.views.MenuView=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._controller=e,n._btnInfo=[{key:"game-1",x:130,y:430},{key:"game-2",x:538,y:430},{key:"game-3",x:130,y:538},{key:"game-4",x:538,y:538},{key:"medals",x:333,y:645}],n._btns=[],n._init(),n}return _inherits(t,PIXI.Container),_createClass(t,[{key:"clear",value:function(){this._clearTween(),this._rotatePhone.alpha=0}},{key:"disableBtns",value:function(){this._btns.forEach(function(e){e.disable()})}},{key:"enableBtns",value:function(){this._btns.forEach(function(e){e.enable()})}},{key:"_clearTween",value:function(){this._delayedTween&&(this._delayedTween.kill(),this._tween.kill())}},{key:"hideRotatePhone",value:function(){console.log("hide"),this._clearTween(),this._rotatePhone.alpha=0}},{key:"_tweenPhone",value:function(){this._clearTween(),this._rotatePhone.alpha=0,this._tween=TweenLite.to(this._rotatePhone,1,{alpha:1}),this._delayedTween=TweenLite.delayedCall(1,function(){this._tweenPhone()},[],this)}},{key:"showRotatePhone",value:function(){console.log("show"),this._rotatePhone.alpha=1,this._tweenPhone()}},{key:"_callback",value:function(e,t,n,o){this._controller.changeState(t)}},{key:"_addRotatePhone",value:function(){this._rotatePhone=new PIXI.Sprite(PIXI.Texture.fromFrame("rotatePhone")),this._rotatePhone.position.set(915,15),this._rotatePhone.alpha=0,this.addChild(this._rotatePhone)}},{key:"_addBtns",value:function(){var e;this._btnInfo.forEach(function(t,n){e=new nmm.components.TexturedButton({texture:PIXI.Texture.fromFrame("btn_option_"+n),x:t.x,y:t.y,key:t.key,enableOnStart:!1,autoHide:!1,callback:this._callback.bind(this)}),this.addChild(e),this._btns.push(e)},this)}},{key:"_addTitle",value:function(){var e=new PIXI.Sprite(PIXI.Texture.fromFrame("title"));e.anchor.set(.5),e.position.set(512,215),this.addChild(e)}},{key:"_init",value:function(){this._addTitle(),this._addBtns(),this._addRotatePhone()}}]),t}();
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();nmm.states.specificStates.views.TabSelectionView=function(t){function e(t){_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n._controller=t,n._btns=[],n.BTN_SPACING=53,n.BTN_WIDTH=84,n.BTN_HEIGHT=88,n._init(),n}return _inherits(e,PIXI.Container),_createClass(e,[{key:"disableBtns",value:function(){this._btns.forEach(function(t){t.disable()})}},{key:"enableBtns",value:function(){this._btns.forEach(function(t){t.enable()})}},{key:"_callback",value:function(t,e,n,r){this._controller.btnClicked(e)}},{key:"_addBtns",value:function(){var t,e,n,r;for(t=0;t<11;t++)t<10?(n=PIXI.Texture.fromFrame("btn_number_"+(t+1)),r=t+1):(n=PIXI.Texture.fromFrame("btn_home_small"),r="menu"),e=new nmm.components.TexturedButton({texture:n,key:r,x:332+t%3*(this.BTN_SPACING+this.BTN_WIDTH),y:190+Math.floor(t/3)*(this.BTN_SPACING+this.BTN_HEIGHT),callback:this._callbackBound}),this.addChild(e),this._btns.push(e)}},{key:"_addTitle",value:function(){var t=new PIXI.Sprite(PIXI.Texture.fromFrame("sub_title_0"));t.anchor.set(.5),t.position.set(512,106),this.addChild(t)}},{key:"_init",value:function(){this._callbackBound=this._callback.bind(this),this._addTitle(),this._addBtns()}}]),e}();